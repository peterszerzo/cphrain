<!DOCTYPE html>
<html>
  <head>
    <title>CphRain | Api</title>
    <meta charset="utf-8">
    <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
    <link href="demo.css" rel="stylesheet">
    <meta charset='utf-8'>
  </head>
  <body>
    <div id="app"></div>
    <div class="commentary">
      <div class="commentary__content">
        <h2>The toolbox</h2>
        <pre>
          <code>
/* call me once, and I'll animate */
cphRain(drops, stepDrops, container);
          </code>
        </pre>
        <p><code>drops</code> &rarr; array of drops</p>
        <p><code>stepDrops</code> &rarr; step function (takes drops, returns new drops)</p>
        <p><code>container</code> &rarr; dom node</p>
      </div>
    </div>
    <script src="vendor/cphrain.js"></script>
    <script>
      function generateDrops(n) {
        const drops = [];
        for (let i = 0; i < n; i++) {
          drops.push({
            x: Math.random(),
            y: Math.random(),
            scale: 1,
            blur: 0
          });
        }
        return drops;
      }

      function stepDrop({x, y, scale, blur}) {
        const isOver = y > 1.2;
        return {
          scale,
          blur,
          x: isOver ? Math.random() : x,
          y: isOver ? -.2 : y + .008
        };
      }

      function stepDrops(drops) {
        return drops.map(stepDrop);
      }

      console.log('Hi, Mom!');
      cphRain(generateDrops(30), stepDrops, document.getElementById('app'));
    </script>
  </body>
</html>
